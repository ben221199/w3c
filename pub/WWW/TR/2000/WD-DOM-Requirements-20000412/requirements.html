<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Generated: Wed Apr 12 14:05:13 EDT 2000 -->
<html lang='en'>
<head>
  <title>Document Object Model (DOM) Requirements</title>
  <link rel='stylesheet' type='text/css' href='./spec.css'>
  <link rel='stylesheet' type='text/css' href='/StyleSheets/TR/W3C-WD.css'>
  <link rel='contents' href='requirements.html#contents'>
</head>
<body>
<div class='navbar' align='center'>
<a accesskey='c' href='requirements.html#contents'>contents</a>
<hr title='Navigation area separator'>
</div>

<div class='head'>
<p><a href='http://www.w3.org/'>
<img height='48' width='72'
 alt='W3C' src='/Icons/w3c_home'></a></p>
  <h1 id='title'>Document Object Model (DOM) Requirements</h1>
<!-- WD-DOM-Requirements-20000412 -->  <h2 id='W3C-doctype'>W3C Working Draft <i>12 April, 2000</i></h2>
<dl><dt>This version:</dt>
<dd><a href='http://www.w3.org/TR/2000/WD-DOM-Requirements-20000412'>http://www.w3.org/TR/2000/WD-DOM-Requirements-20000412</a></dd>
<dt>Latest version:</dt>
<dd><a href='http://www.w3.org/TR/DOM-Requirements'>http://www.w3.org/TR/DOM-Requirements</a></dd>
<dt>Previous version:</dt>
<dd><a href='http://www.w3.org/TR/2000/WD-DOM-Requirements-20000208'>http://www.w3.org/TR/2000/WD-DOM-Requirements-20000208</a></dd>
</dl>
<dl><dt>Editors:
</dt><dd>Lauren Wood, 
<i>SoftQuad Software Inc., chair</i></dd>
<dd>Philippe Le Hégaret, 
<i>W3C, staff contact</i></dd>
<dd>Ben Chang, 
<i>Oracle</i></dd>
<dd>James Davidson, 
<i>Sun</i></dd>
<dd>Andy Heninger, 
<i>IBM</i></dd>
<dd>Joe Kesselman, 
<i>IBM</i></dd>
<dd>Arnaud Le Hors, 
<i>IBM</i></dd>
<dd>Tom Pixley, 
<i>Netscape Communications Corporation</i></dd>
<dd>Jared Sorensen, 
<i>Novell, Inc. (until January 1999)</i></dd>
<dd>Ray Whitmer, 
<i>Excite@Home</i></dd>
</dl>
 <p class='copyright'><a href='http://www.w3.org/Consortium/Legal/ipr-notice#Copyright'> Copyright</a>
 &copy; 2000 <A href='http://www.w3.org/'><abbr 
 title='World Wide Web Consortium'>W3C</abbr></a><sup>&reg;</sup>
 (<a href='http://www.lcs.mit.edu/'><abbr 
 title='Massachusetts Institute of Technology'>MIT</abbr></a>,
 <a href='http://www.inria.fr/'><abbr lang='fr' title='Institut
 National de Recherche en Informatique et Automatique'>INRIA</abbr></a>, <a
 href='http://www.keio.ac.jp/'>Keio</a>), All Rights Reserved. W3C 
 <a href='http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer'>liability</a>, 
 <a href='http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks'>trademark</a>, 
 <a href='http://www.w3.org/Consortium/Legal/copyright-documents-19990405'>document use</a> and 
 <a href='http://www.w3.org/Consortium/Legal/copyright-software-19980720'>software licensing</a> rules
 apply.</p></div>
<hr title='separator from header'>
<h2 id='abstract'>Abstract</h2>
<div class='abstract'>
<p>
	This document contains the requirements for the Document Object
	Model, a platform- and language-neutral interface that allows programs
	and scripts to dynamically access and update the content, structure and
	style of documents. The Document Object Model provides a standard set
	of objects for representing HTML and XML documents, a standard model of
	how these objects can be combined, and a standard interface for
	accessing and manipulating them. Vendors can support the DOM as an
	interface to their proprietary data structures and APIs, and content
	authors can write to the standard DOM interfaces rather than
	product-specific APIs, thus increasing interoperability on the Web.
      </p></div>
<h2 id='status'>Status of this document</h2>
<div class='status'>
<p>
	<em>This section describes the status of this document at the time of
	its publication. Other documents may supersede this document. The
	latest status of this document series is maintained at the W3C.</em>
      </p><p>
	This document is a Working Draft of the requirements of the Document
	Object Model. Comments on this document are invited and are to be sent
	to the public mailing list <a href='mailto:www-dom@w3.org'>www-dom@w3.org</a>. An archive is available at
	<a href='http://lists.w3.org/Archives/Public/www-dom/'>http://lists.w3.org/Archives/Public/www-dom/</a>.
      </p><p>This is still a draft document and may be updated, replaced or
      obsoleted by other documents at any time. It is therefore inappropriate
      to use it as reference material or to cite it as other than "work in
      progress". This is work in progress and does not imply endorsement by, or
      the consensus of, either W3C or members of the DOM Working Group.</p><p>This document has been produced as part of the <a href='http://www.w3.org/DOM/Activity.html'>W3C DOM Activity</a>. The
	authors of this document are the DOM WG members.</p><p>A list of current W3C Recommendations and other technical documents
	can be found at <a href='http://www.w3.org/TR'>http://www.w3.org/TR</a>.</p></div>
<p>
      </p>
<div class='div1'><a name='contents'></a>

<h1 id='contents-h1' class='div1'>
Table of Contents</h1>
<ul class='toc'>
<li class='tocline2'> <a class='tocxref' href='#contents'>Table of Contents</a>
</li>
</ul>

<ul class='toc'>
<li class='tocline2'> <a class='tocxref' href='#General'>Chapter 1: General requirements</a>
<ul class='toc'>
<li class='tocline3'> <a class='tocxref' href='#core'>1.1. Basic requirements</a>
</li>
<li class='tocline3'> <a class='tocxref' href='#error'>1.2. Error Reporting</a>
</li>
</ul>
</li>
<li class='tocline2'> <a class='tocxref' href='#Level1'>Chapter 2: DOM Level 1 Requirements</a>
<ul class='toc'>
<li class='tocline3'> <a class='tocxref' href='#Structure'>2.1. Structure Navigation</a>
<ul class='toc'>
<li class='tocline4'> <a class='tocxref' href='#structure-general'>2.1.1. General Requirements</a>
<li class='tocline4'> <a class='tocxref' href='#structure-html'>2.1.2. HTML Requirements</a>
</ul></li>
<li class='tocline3'> <a class='tocxref' href='#DocumentManipulation'>2.2. Document Manipulation</a>
</li>
<li class='tocline3'> <a class='tocxref' href='#ContentManipulation'>2.3. Content Manipulation</a>
</li>
</ul>
</li>
<li class='tocline2'> <a class='tocxref' href='#Level2'>Chapter 3: DOM Level 2 Requirements</a>
<ul class='toc'>
<li class='tocline3'> <a class='tocxref' href='#level2-eventmodel'>3.1. Event Model</a>
</li>
<li class='tocline3'> <a class='tocxref' href='#level2-stylesheet'>3.2. Stylesheet Object Model</a>
</li>
<li class='tocline3'> <a class='tocxref' href='#level2-range'>3.3. Range model</a>
</li>
<li class='tocline3'> <a class='tocxref' href='#level2-traversal'>3.4. Traversal model</a>
</li>
</ul>
</li>
<li class='tocline2'> <a class='tocxref' href='#Level3'>Chapter 4: DOM Level 3 Requirements</a>
<ul class='toc'>
<li class='tocline3'> <a class='tocxref' href='#level3-core'>4.1. Core Requirements</a>
</li>
<li class='tocline3'> <a class='tocxref' href='#Level-3-Events-Requirements'>4.2. Level 3 Events Requirements</a>
<ul class='toc'>
<li class='tocline4'> <a class='tocxref' href='#Level-3-Events-Requirements-eventGrouping'>4.2.1. EventListener grouping</a>
<li class='tocline4'> <a class='tocxref' href='#Level-3-Events-Requirements-keyEvents'>4.2.2. Key event set</a>
<li class='tocline4'> <a class='tocxref' href='#Level-3-Events-Requirements-inputEvent'>4.2.3. Input event set</a>
<li class='tocline4'> <a class='tocxref' href='#Level-3-Events-Requirements-deviceIndependent'>4.2.4. Device independent event set</a>
</ul></li>
<li class='tocline3'> <a class='tocxref' href='#level3-CM'>4.3. Content Models and Validation Use Cases and Requirements</a>
</li>
<li class='tocline3'> <a class='tocxref' href='#Level-3-LS-Requirements'>4.4. Load and Save Requirements</a>
<ul class='toc'>
<li class='tocline4'> <a class='tocxref' href='#level3-ls-general'>4.4.1. General Requirements</a>
<li class='tocline4'> <a class='tocxref' href='#level3-load-requirements'>4.4.2. Load Requirements</a>
<li class='tocline4'> <a class='tocxref' href='#level3-ls-writer'>4.4.3. XML Writer Requirements</a>
<li class='tocline4'> <a class='tocxref' href='#level3-ls-others'>4.4.4. Other Items Under Consideration</a>
</ul></li>
<li class='tocline3'> <a class='tocxref' href='#Level-3-VF-Requirements'>4.5. Views and Formatting Requirements</a>
<ul class='toc'>
<li class='tocline4'> <a class='tocxref' href='#VF-Use-Cases'>4.5.1. Use Cases</a>
</ul></li>
</ul>
</li>
</ul>

</div> <!-- div1 -->
<div class='div1'><a name='General'></a>

<h1 id='General-h1' class='div1'>1. 
General requirements</h1>
<div class='div2'><a name='core'></a>

<h2 id='core-h2' class='div2'>1.1. 
Basic requirements</h2><p>
      <ol>
<li>
	    References to XML and HTML documents generally denote the physical
	    files that contain structural markup.
	  </li>
<li>
	    Where possible, the Level of the DOM in which the requirements are
	    met is noted.
	  </li>
</ol>

    <p>
      Listed below are the general requirements of the Document Object Model.
      <ol>
<li>
	    The Object Model is language neutral and platform independent.
	  </li>
<li>
	    There will be a core DOM that is applicable to HTML, CSS and XML
	    documents.
	  </li>
<li>
	    The Object Model can be used to construct and deconstruct the
	    document.
	  </li>
<li>
	    The Object Model will not preclude use by either agents external
	    to the document content, or scripts embedded within the document.
	  </li>
<li>
	    Consistent naming conventions must be used through all levels of
	    the Object Model.
	  </li>
<li>
	    A visual UI component will not be required for a conforming
	    implementation of the Object Model.
	  </li>
<li>
	    The specific HTML, CSS or XML document object models will be driven
	    by the underlying constructs of those languages.
	  </li>
<li>
	    It must be possible to read in a document and write out a
	    structurally isomorphic document.
	  </li>
<li>
	    The Object Model will not expose the user to problems with
	    security, validity, or privacy.
	  </li>
<li>
	    The Object Model will not preclude other mechanisms for
	    manipulating documents.
	  </li>
</ol>

    </div> <!-- div2 -->
<div class='div2'><a name='error'></a>

<h2 id='error-h2' class='div2'>1.2. 
Error Reporting</h2><p><ol>
<li>
	    Error reporting will be primarily via return values. Exceptions
	    will be raised on unrecoverable conditions.
	  </li>
<li>
	    The DOM will provide a document-wide reporting mechanism.
	    <em>[After Level 1]</em>
	  </li>
<li>
	    The DOM error state can be queried. <em>[After Level 1]</em>
	  </li>
</ol>

    </div> <!-- div2 --></div> <!-- div1 -->
<div class='div1'><a name='Level1'></a>

<h1 id='Level1-h1' class='div1'>2. 
DOM Level 1 Requirements</h1>
<div class='div2'><a name='Structure'></a>

<h2 id='Structure-h2' class='div2'>2.1. 
Structure Navigation</h2><p>
      This refers to the navigation around a document, such as finding the
      parent of a given element, or what children elements a given parent
      element contains.
      
    
<div class='div3'><a name='structure-general'></a>

<h3 id='structure-general-h3' class='div3'>2.1.1. 
General Requirements</h3><p><ol>
<li>
	      All document content, including elements and attributes, will
	      be programmatically accessible and manipulable.
	    </li>
<li>
	      Navigation from any element to any other element will be
	      possible.
	    </li>
<li>
	      There will be a way to uniquely and reproducibly enumerate the
	      structure of static documents.
	    </li>
<li>
	      There will be a way to query for elements and
	      attributes. <em>[After Level 1]</em>
	    </li>
<li>
	      Basic low-level functions (get first, get next, etc.) will be
	      provided, along with convenience functions that build upon
	      them, but have a consistent access method.
	    </li>
</ol>

      </div> <!-- div3 -->
<div class='div3'><a name='structure-html'></a>

<h3 id='structure-html-h3' class='div3'>2.1.2. 
HTML Requirements</h3><p>
	These are specific to HTML document.
	<ol>
<li>
	      All elements that are defined in the HTML 4.0 specification are
	      exposed. User agents may expose other elements using similar
	      interfaces.
	    </li>
<li>
	      Unknown tags and attributes are exposed.
	    </li>
<li>
	      Implied elements are exposed even if not explicitly defined in
	      the document (e.g., HTML, HEAD, BODY).
	    </li>
</ol>

      </div> <!-- div3 --></div> <!-- div2 -->
<div class='div2'><a name='DocumentManipulation'></a>

<h2 id='DocumentManipulation-h2' class='div2'>2.2. 
Document Manipulation</h2><p>
      <ol>
<li>
	    There will be a way to add, remove and change elements and/or
	    tags in the document structure.
	    
	  </li>
<li>
	    There will be a way to add, remove and change attributes in the
	    document structure.
	  </li>
<li>
	    Operations (or a combination of operations) must restore
	    consistency before they return.
	  </li>
<li>
	    A valid static document acted upon by the DOM will deliver a
	    consistent reproducible document structure.
	  </li>
</ol>

    </div> <!-- div2 -->
<div class='div2'><a name='ContentManipulation'></a>

<h2 id='ContentManipulation-h2' class='div2'>2.3. 
Content Manipulation</h2><p>
      <ol>
<li>
	    There will be a way to determine the containing element from any
	    text part of the document.
	  </li>
<li>
	    There will be a way to manipulate (add, change, delete) content.
	  </li>
<li>
	    There will be a way to navigate content.
	  </li>
</ol>

    </div> <!-- div2 --></div> <!-- div1 -->
<div class='div1'><a name='Level2'></a>

<h1 id='Level2-h1' class='div1'>3. 
DOM Level 2 Requirements</h1>
<div class='div2'><a name='level2-eventmodel'></a>

<h2 id='level2-eventmodel-h2' class='div2'>3.1. 
Event Model</h2><p>
      The event model must be rich enough to create completely interactive
      documents. This requires the ability to respond to any user action that
      may occur on the document.  Therefore, many of these requirements only
      apply if a UI component is involved.
      <ol>
<li>
	    All elements will be capable of generating events.
	  </li>
<li>
	    There will be user interface events, mutation events, and logical
	    events.
	  </li>
<li>
	    The event delivery mechanism will allow for overriding of default
	    behavior.
	  </li>
<li>
	    The event model will provide a mechanism by which events for
	    specific elements may be received by an ancestor in the DOM
	    hierarchy.
	  </li>
<li>
	    Events may be synchronous.
	  </li>
<li>
	    Events will be defined in a platform independent and language
	    neutral way.
	  </li>
<li>
	    There will be an interface for binding to events.
	  </li>
</ol>

    </div> <!-- div2 -->
<div class='div2'><a name='level2-stylesheet'></a>

<h2 id='level2-stylesheet-h2' class='div2'>3.2. 
Stylesheet Object Model</h2><p>
      Cascading Style Sheets (CSS) is one model for manipulating the style of
      the document. The Stylesheet Object Model exposes the ability to create,
      modify, and associate CSS style sheets with the document. The stylesheet
      model will be extensible to other stylesheet formats in the future.
      <ol>
<li>
	    All style sheets will be represented in the object model.
	  </li>
<li>
	    There will be a CSS stylesheet model. The CSS object model will be
	    defined as part of a stylesheet embedding model, where the core
	    part of the model may be applicable to other style languages.
	  </li>
<li>
	    Selectors, rules and properties of individual style sheets can be
	    added, removed and changed.
	  </li>
<li>
	    All elements of a CSS style can be added, removed, and changed in
	    the object model. This includes but is not limited to:
	    <ol>
<li>
		  linked style sheets
		</li>
<li>
		  imported style sheets
		</li>
<li>
		  alternative style sheets
		</li>
<li>
		  CSS pseudo-classes and CSS pseudo-elements
		</li>
<li>
		  contextual selectors
		</li>
<li>
		  inline styles
		</li>
<li>
		  all properties as defined in the CSS specification, including
		  but not limited to font properties, colors, backgrounds, and
		  box properties.
		</li>
</ol>

	  </li>
</ol>

    </div> <!-- div2 -->
<div class='div2'><a name='level2-range'></a>

<h2 id='level2-range-h2' class='div2'>3.3. 
Range model</h2><dl>
<dt><b>Linear view</b></dt>
<dd>allows querying and editing functionality based on a range of text
	  rather than a subtree of Nodes. </dd><dt><b>Live</b></dt>
<dd>edits on the range modify the underlying tree</dd><dt><b>Low Level</b></dt>
<dd>no parser, no relationship to user agent, no convenience methods
	  or range comparison methods (these would be part of the SmartRange
	  interface)</dd></dl>
<p>The DOM Range API should support the following types of operations on
    ranges:
      <ul>
<li>Creating a Range object</li>
<li>Extracting text from a Range (with or without markup)</li>
<li>Inserting, Deleting text inside the Range</li>
<li>Inserting, Deleting document structure inside the Range</li>
</ul>

    </div> <!-- div2 -->
<div class='div2'><a name='level2-traversal'></a>

<h2 id='level2-traversal-h2' class='div2'>3.4. 
Traversal model</h2><p>
      The DOM Traversal API should be able to see a filtered view without
      comments or entity references, and to have an iterator robust under
      mutation.
    </div> <!-- div2 --></div> <!-- div1 -->
<div class='div1'><a name='Level3'></a>

<h1 id='Level3-h1' class='div1'>4. 
DOM Level 3 Requirements</h1>
<div class='div2'><a name='level3-core'></a>

<h2 id='level3-core-h2' class='div2'>4.1. 
Core Requirements</h2><p>Here are the items that will be addressed:
    <ul>
<li>moving (not copying!) a node from one document to
	  another. DOM Level 2 provides an importNode method that copies a
	  node from one document to another, it would be useful to have
	  a way of simply moving a node, even though in some cases, such as
	  across implementations, it may fail.</li>
<li>node ordering. Is this node before that one in document order?
	  Although this can be done on top of the DOM Level 2, having it as
	  part of the DOM would provide for possible
	  optimisations.</li>
<li>whitespace in element content (aka "ignorable
	  whitespace"). Does this Text node only contain whitespace in
	  element content?</li>
<li>exposing the XML and Text declarations.</li>
<li>exposing the base URI of a node (part of the XML
	  Infoset)</li>
<li>bootstrapping a DOM in Java. How does one get a hand on a
	  DOMImplementation class?</li>
</ul>

  <p>Here are other items that will be considered:
    <ul>
<li>a way to turn off error checking, so that better performance
	  can be achieved, such as when the DOM is built from a parser which
	  already performs error checking.</li>
<li>a way to attach some user data to a node</li>
<li>node identity. Is this object the same node as that
	  one?</li>
<li>node equality and hashcode</li>
<li>getElementsByAttributeValue</li>
<li>namespace fixup/lookup. DOM Level 2 is based on an early
	  binding model and the implementation neither fixes the namespace
	  declarations as nodes are moved around or inserted nor it provides
	  any lookup mechanism.</li>
</ul>

  </div> <!-- div2 -->
<div class='div2'><a name='Level-3-Events-Requirements'></a>

<h2 id='Level-3-Events-Requirements-h2' class='div2'>4.2. 
Level 3 Events Requirements</h2><p>
    The DOM Level 3 Events specification will attempt to address some of the
    remaining issues from the DOM Level 2 Event specification as well as a
    couple or requested enhancements to the model.  It will not attempt to
    redesign the model nor will attempt to define any additional event models.
  
<div class='div3'><a name='Level-3-Events-Requirements-eventGrouping'></a>

<h3 id='Level-3-Events-Requirements-eventGrouping-h3' class='div3'>4.2.1. 
EventListener grouping</h3><p>
      The specification must define a technique for registering
      <code>EventListener</code>s in groups.  These groups will then have
      specified behavior in which attempts to modify the flow of an event will
      be restricted and affected only the group to which the
      <code>EventListener</code> in question belongs.
    <p>
      It is also required that whatever technique is specified to accomplish
      this purpose be compatible with the existing DOM Level 2 Event model and
      any <code>EventListener</code>s registered using DOM Level 2 Event model
      methods.
    </div> <!-- div3 -->
<div class='div3'><a name='Level-3-Events-Requirements-keyEvents'></a>

<h3 id='Level-3-Events-Requirements-keyEvents-h3' class='div3'>4.2.2. 
Key event set</h3><p>
      The specification must define a set of key events to handle keyboard
      input.  This key event set must be fully internationalizable.  It is
      hoped that this key event set will be compatible with existing key event
      sets used in current systems however this is not a requirement.
    </div> <!-- div3 -->
<div class='div3'><a name='Level-3-Events-Requirements-inputEvent'></a>

<h3 id='Level-3-Events-Requirements-inputEvent-h3' class='div3'>4.2.3. 
Input event set</h3><p>
      The specification should attempt to define a set of input events to
      handle IME based keyboard input.  It is expected that this requirement
      will depend heavily on any key event set defined by the specification.
    </div> <!-- div3 -->
<div class='div3'><a name='Level-3-Events-Requirements-deviceIndependent'></a>

<h3 id='Level-3-Events-Requirements-deviceIndependent-h3' class='div3'>4.2.4. 
Device independent event set</h3><p>
      The specification must define a device independent event set.  This event
      set should allow notification of typical user interaction with a document
      without requiring the use of either mouse events or key events.
    </div> <!-- div3 --></div> <!-- div2 -->
<div class='div2'><a name='level3-CM'></a>

<h2 id='level3-CM-h2' class='div2'>4.3. 
Content Models and Validation Use Cases and Requirements</h2><p>The content model referenced in these use cases/requirements is an abstraction and does not refer to DTDs or XML Schemas or any transformations between the two.<p>For the CM-editing and document-editing worlds, the following use cases and requirements are common to both:<p>Use Cases:<ol>
<li>CU1. Modify an existing content model because it needs to be updated.</li>
<li>CU2. Associating a content model (external and/or internal) with a document, or changing the current association.</li>
<li>CU3. Using the same external content model with several documents, without having to reload it.</li>
</ol>
<p>Requirements:<ol>
<li>CR1. Retrieve information from content model.</li>
<li>CR2. Load an existing content model, perhaps independently from a document.</li>
<li>CR3. Being able to determine if a document has a content model associated with it.</li>
</ol>
<p>Specific to the CM-editing world, the following are use cases and requirements:<p>Use Cases:<ol>
<li>CMU1. Create a new content model.</li>
<li>CMU2. Clone/map all or parts of an existing content model to a new or existing content model.</li>
<li>CMU3. Save a content model in a separate file.  For example, a DTD can be broken up into reusable pieces, which are then brought in via entity references, these can then be saved in a separate file.</li>
<li>CMU4. Partial content model checking. For example, only certain portions of the content model need be validated.</li>
</ol>
<p>Requirements:<ol>
<li>CMR1. Create a new content model object.</li>
<li>CMR2. View and modify all parts of the content model.</li>
<li>CMR3. Validate the content model itself.  For example, if an element/attribute is inserted incorrectly into the content model.</li>
<li>CMR4. Serialize the content model.</li>
<li>CMR5. Clone all or parts of an existing content model.</li>
<li>CMR6. Validate portions of the XML document against the content model.</li>
</ol>
<p>Specific to the document-editing world, the following are use cases and requirements:<p>Use Cases:<ol>
<li>DU1. For editing documents with an associated content model, provide the assistance necessary so that valid documents can be modified and remain valid.</li>
<li>DU2. For editing documents with an associated content model, provide the assistance necessary to transform an invalid document into a valid one.</li>
</ol>
<p>Requirements:<ol>
<li>DR1. Being able to determine if the document is not well-formed, and if not, be given enough assistance to locate the error.</li>
<li>DR2. Being able to determine if the document is not namespace well-formed, and if not, be given enough assistance to locate the error.</li>
<li>DR3. Being able to determine if the document is not valid with respect to its associated content model, and if not, give enough assistance to locate the error.</li>
<li>DR4. Being able to determine if specific modifications to a document would make it become invalid.</li>
<li>DR5. Retrieve information from the content model.  For example, getting a list of all the defined element names for document editing purposes.</li>
</ol>
</div> <!-- div2 -->
<div class='div2'><a name='Level-3-LS-Requirements'></a>

<h2 id='Level-3-LS-Requirements-h2' class='div2'>4.4. 
Load and Save Requirements</h2><p>DOM Level 3 will provide an API for loading XML source documents into a
    DOM representation and for saving a DOM representation as a XML document. <p>Some environments, such as the Java platform or COM, have their own ways
    to persist objects to streams and to restore them. There is no direct
    relationship between these mechanisms and the DOM load/save mechanism. This
    specification defines how to serialize documents only to and from XML
    format.
<div class='div3'><a name='level3-ls-general'></a>

<h3 id='level3-ls-general-h3' class='div3'>4.4.1. 
General Requirements</h3><p>Requirements that apply to both loading and saving documents.
<div class='div4'><a name='level3-ls-document'></a>

<h4 id='level3-ls-document-h4' class='div4'>4.4.1.1. 
Document Sources</h4><p>Documents must be able to be parsed from and saved to the following
	sources:<ul>
<li>Input and Output Streams</li>
<li>URIs</li>
<li>Files</li>
</ul>
<p>Note that Input and Output streams take care of the in memory case.
	One point of caution is that a stream doesn't allow a base URI to be defined
	against which all relative URIs in the document are resolved.</div> <!-- div4 -->
<div class='div4'><a name='level3-ls-loading'></a>

<h4 id='level3-ls-loading-h4' class='div4'>4.4.1.2. 
Content Model Loading</h4><p>While creating a new document using the DOM API, a mechanism must be
	provided to specify that the new document uses a pre-existing Content
	Model and to cause that Content Model to be loaded.<p>Note that while DOM Level 2 creation can specify a Content Model
	when creating a document (public and system IDs for the external subset, and a
	string for the internal subset), DOM Level 2 implementations do not process the
	Content Model's content. For DOM Level 3, the Content Model's content must be
	be read.</div> <!-- div4 -->
<div class='div4'><a name='level3-ls-reuse'></a>

<h4 id='level3-ls-reuse-h4' class='div4'>4.4.1.3. 
Content Model Reuse</h4><p>When processing a series of documents, all of which use the same
	Content Model, implementations should be able to reuse the already parsed and loaded
	Content Model rather than reparsing it again for each new document.<p>This feature may not have an explicit DOM API associated with it,
	but it does require that nothing in this section, or the Content Model section,
	of this specification block it or make it difficult to implement.</div> <!-- div4 -->
<div class='div4'><a name='level3-ls-entity'></a>

<h4 id='level3-ls-entity-h4' class='div4'>4.4.1.4. 
Entity Resolution</h4><p>Some means is required to allow applications to map public and
	system IDs to the correct document. This facility should provide sufficient
	capability to allow the implementation of catalogs, but providing catalogs
	themselves is not a requirement. In addition XML Base needs to be
	addressed.</div> <!-- div4 -->
<div class='div4'><a name='level3-ls-error'></a>

<h4 id='level3-ls-error-h4' class='div4'>4.4.1.5. 
Error Reporting</h4><p>Loading a document can cause the generation of errors including:<ul>
<li>I/O Errors, such as the inability to find or open the specified
	    document.<br>
XML well formedness errors.<br>
Validity errors</li>
</ul>
<p>Saving a document can cause the generation of errors including:<ul>
<li>I/O Errors, such as the inability to write to a specified
	    stream, url, or file.<br>
Improper constructs, such as '--' in comments, in the DOM that
	    cannot be represented as well formed XML.</li>
</ul>
<p>This section, as well as the DOM Level 3 Content Model section
	should use a common error reporting mechanism. Well-formedness and validity
	checking are in the domain of the Content Model section, even though they may
	be commonly generated in response to an application asking that a document be
	loaded.</div> <!-- div4 --></div> <!-- div3 -->
<div class='div3'><a name='level3-load-requirements'></a>

<h3 id='level3-load-requirements-h3' class='div3'>4.4.2. 
Load Requirements</h3><p>The following requirements apply to loading documents.
<div class='div4'><a name='level3-ls-parser'></a>

<h4 id='level3-ls-parser-h4' class='div4'>4.4.2.1. 
Parser Properties and Options</h4><p>Parsers may have properties or options that can be set by
	applications. Examples include:<ul>
<li>Expansion of entity references.</li>
<li>Creation of entity ref nodes.</li>
<li>Handling of white space in element content.</li>
<li>Enabling of namespace handling.</li>
<li>Enabling of content model validation.</li>
</ul>
<p>A mechanism to set properties, query the state of properties, and to
	query the set of properties supported by a particular DOM implementation is
	required.</div> <!-- div4 --></div> <!-- div3 -->
<div class='div3'><a name='level3-ls-writer'></a>

<h3 id='level3-ls-writer-h3' class='div3'>4.4.3. 
XML Writer Requirements</h3><p>The fundamental requirement is to write a DOM document as XML source.
      All information to be serialized should be available via the
      normal DOM API.
<div class='div4'><a name='level3-ls-writer-properties'></a>

<h4 id='level3-ls-writer-properties-h4' class='div4'>4.4.3.1. 
XML Writer Properties and Options</h4><p>There are several options that can be defined when saving an XML
	document. Some of these are:<ul>
<li>Saving to Canonical XML format.</li>
<li>Pretty Printing.</li>
<li>Specify the encoding in which a document is written.</li>
<li>How and when to use character entities.</li>
<li>Namespace prefix handling.</li>
<li>Saving of Content Models.</li>
<li>Handling of external entities.</li>
</ul>
</div> <!-- div4 -->
<div class='div4'><a name='s-4.4.3.2'></a>

<h4 id='s-4.4.3.2-h4' class='div4'>4.4.3.2. 
Content Model Saving</h4><p>Requirement from the Content Model group.</div> <!-- div4 --></div> <!-- div3 -->
<div class='div3'><a name='level3-ls-others'></a>

<h3 id='level3-ls-others-h3' class='div3'>4.4.4. 
Other Items Under Consideration</h3><p>The following items are not committed to, but are under consideration.
      Public feedback on these items is especially requested.
<div class='div4'><a name='level3-ls-incremental'></a>

<h4 id='level3-ls-incremental-h4' class='div4'>4.4.4.1. 
Incremental and/or Concurrent Parsing</h4><p>Provide the ability for a thread that requested the loading of a
	document to continue execution without blocking while the document is being
	loaded. This would require some sort of notification or completion event when
	the loading process was done.<p>Provide the ability to examine the partial DOM representation before
	it has been fully loaded.<p>In one form, a document may be loaded asynchronously while a DOM
	based application is accessing the document. In another form, the application
	may explicitly ask for the next incremental portion of a document to be loaded.</div> <!-- div4 -->
<div class='div4'><a name='level3-ls-filtered-save'></a>

<h4 id='level3-ls-filtered-save-h4' class='div4'>4.4.4.2. 
Filtered Save</h4><p>Provide the capability to write out only a part of a document. May
	be able to leverage TreeWalkers, or the Filters associated with TreeWalkers, or
	Ranges as a means of specifying the portion of the document to be written.</div> <!-- div4 -->
<div class='div4'><a name='level3-ls-documents'></a>

<h4 id='level3-ls-documents-h4' class='div4'>4.4.4.3. 
Document Fragments</h4><p>Document fragments, as specified by the XML Fragment specification,
	should be able to be loaded. This is useful to applications that
	only need to process some part of a large document. Because the DOM is
	typically implemented as an in-memory representation of a document, fully
	loading large documents can require large amounts of memory.<p>XPath should also be considered as a way to identify XML Document
	fragments to load.</div> <!-- div4 -->
<div class='div4'><a name='level3-ls-contexts'></a>

<h4 id='level3-ls-contexts-h4' class='div4'>4.4.4.4. 
Document Fragments in Context of Existing DOM</h4><p>Document fragments, as specified by the XML Fragment specification,
	should be able to be loaded into the context of an existing document at a point
	specified by a node position, or perhaps a range. This is a separate feature
	than simply loading document fragments as a new Node.</div> <!-- div4 --></div> <!-- div3 --></div> <!-- div2 -->
<div class='div2'><a name='Level-3-VF-Requirements'></a>

<h2 id='Level-3-VF-Requirements-h2' class='div2'>4.5. 
Views and Formatting Requirements</h2><p>An important aspect of the DOM is the strong separation between the
    structure of a document and its presentations or views. The abstract structure
    and value of the document content is modelled by the DOM core. The physical
    characteristics and state of the presentation will be modelled by the views and
    formatting module. <p>While the abstract model is persistent, the presentation is active and
    temporary, responding to user and environment events as well as document
    mutation. The state of the presentation can not generally be manipulated as
    directly as the DOM core nodes. The API must allow querying and responding to
    changes in the physical characteristics of the presentation and its
    environment. <p> 
    <div style='color: red'>(<i><b>ED: </b></i>We need a FAQ entry elaborating on why the presentation
	characteristics are generally not mutable.)</div>
<p>The physical characteristics of the presentation are very tied to the
    medium and style system being used. An abstract layer must exist to allow for
    generalization of common properties of presentations on arbitrary media and
    style systems. Concrete mappings must also be available for prevalent
    presentation media and style systems. <p>The API must support multiple simultaneous dissimilar presentations of a
    document. The API must permit enumeration of current views. The API may permit
    creation new views of the document. The API must provide access to the values
    of characteristics of the presentation of individual nodes within the document.
    These are the actual values that have been derived from the style system that
    are used to render the document. The API may also provide the ability to listen
    for events fired as a result of presentational changes. Properties of the
    presentation of DOM nodes in a visual medium may include actual position,
    dimensions, visibility, colors, fonts, generated text, and so on. <p>The API must make it possible to find the document nodes being presented
    by a particular part or location within the presentation. <p>The API must make it possible to request user selection and focus.
<div class='div3'><a name='VF-Use-Cases'></a>

<h3 id='VF-Use-Cases-h3' class='div3'>4.5.1. 
Use Cases</h3><p> 
      <div style='color: red'>(<i><b>ED: </b></i>More use cases required.)</div>

<div class='div4'><a name='VF-Selection-and-focus'></a>

<h4 id='VF-Selection-and-focus-h4' class='div4'>4.5.1.1. 
Selection and Focus</h4></div> <!-- div4 -->
<div class='div4'><a name='VF-Windon_screen'></a>

<h4 id='VF-Windon_screen-h4' class='div4'>4.5.1.2. 
<code>Window.screen</code> Functionality Implemented in Current
	Browsers</h4><ul>
<li>Get information on the dimensions or color depth of the
	    screen.</li>
<li>Select different graphics depending upon the screen
	    capabilities.</li>
<li>Use the browser window as an application window for a web
	    application.</li>
<li>Position controls relative to the environment / screen
	    characteristics of the rendering device .</li>
</ul>
</div> <!-- div4 -->
<div class='div4'><a name='VF-multiple-views'></a>

<h4 id='VF-multiple-views-h4' class='div4'>4.5.1.3. 
Multiple Views</h4><ul>
<li>Split view in a browser or editor which might have different
	    formatting characteristics.</li>
<li>Synchronization of view-specific state (e.g. selection and
	    focus) between multiple similar or dissimilar views on the same document in an
	    editing environment.</li>
</ul>
</div> <!-- div4 -->
<div class='div4'><a name='VF-Formatting-information'></a>

<h4 id='VF-Formatting-information-h4' class='div4'>4.5.1.4. 
Formatting Information</h4><ul>
<li>Tool tips, annotations or other visual enhancements that need to
	    be positioned relative to the rendering of a specific element.</li>
<li>Hit testing for an application in a visual medium where feedback
	    is provided in response to user events.</li>
<li>Color picker application that displays actual color used for
	    element or area.</li>
</ul>
</div> <!-- div4 --></div> <!-- div3 --></div> <!-- div2 --></div> <!-- div1 --><div class='navbar' align='center'>
<hr title='Navigation area separator'>
<a accesskey='c' href='requirements.html#contents'>contents</a>
</div>
<script src="https://www.w3.org/scripts/TR/fixup.js"></script></body>
</html>
